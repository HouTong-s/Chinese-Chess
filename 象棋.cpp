// 象棋.cpp : 此文件包含 "main" 函数。程序执行将在此处开始并结束。
//

#include"func.h"
using namespace std;
char board[10][9] = { {-1,-2,-3,-4,-5,-4,-3,-2,-1},
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,-6,0 ,0 ,0 ,0 ,0 ,-6,0 },
				{-7,0 ,-7,0 ,-7,0 ,-7,0 ,-7},
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{7 ,0 ,7 ,0 ,7 ,0 ,7 ,0 ,7 },
				{0 ,6 ,0 ,0 ,0 ,0 ,0 ,6 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{1 ,2 ,3 ,4 ,5 ,4 ,3 ,2 ,1 }, };

char tempboard[10][9];
/*
*				{ {-1,-2,-3,-4,-5,-4,-3,-2,-1},
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,-6,0 ,0 ,0 ,0 ,0 ,-6,0 },
				{-7,0 ,-7,0 ,-7,0 ,-7,0 ,-7},
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{7 ,0 ,7 ,0 ,7 ,0 ,7 ,0 ,7 },
				{0 ,6 ,0 ,0 ,0 ,0 ,0 ,6 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{1 ,2 ,3 ,4 ,5 ,4 ,3 ,2 ,1 }, };

				{ {0 ,0 ,0 ,0 ,-5,-4,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,-4,7 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,7 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,2 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,3 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,4 ,0 ,0 ,0 ,0 },
				{0 ,0 ,3 ,0 ,5 ,4 ,0 ,0 ,0 }, };

				{{0 ,0 ,0 ,0 ,-5,0,0 ,0 ,0 },
				{0 ,0 ,0 ,7 ,-4,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,-3,7 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,1 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,-1,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,3 ,0 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,-7,0 ,0 ,0 ,0 },
				{0 ,0 ,3 ,-7,0 ,5 ,0 ,0 ,0 }, };

				{{-1,0 ,-3,-4,-5,0,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,-4,0 ,0 ,0 ,0 },
				{0 ,-6,0 ,0 ,-3,0 ,0 ,0 ,0 },
				{-7,0 ,-7,6 ,0 ,1 ,0 ,0 ,-7},
				{0 ,0 ,0 ,0 ,0 ,0 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{7 ,0 ,7 ,0 ,7 ,0 ,7 ,0 ,7 },
				{0 ,6 ,0 ,0 ,6 ,0 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,5 ,0 ,0 ,0 },
				{1 ,2 ,3 ,4 ,0 ,4 ,3 ,1 ,0 }, };


				{{-1,0 ,-3,-4,-5,-4,-3,-1,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,-6,-2,0 ,0 ,0 ,-2,-6,0 },
				{-7,0 ,-7,0 ,-7,0 ,-7,0 ,-7},
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{7 ,0 ,7 ,0 ,7 ,0 ,7 ,0 ,7 },
				{0 ,6 ,0 ,0 ,6 ,0 ,2 ,0 ,0 },
				{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
				{1 ,2 ,3 ,4 ,5 ,4 ,3 ,1 ,0 }, };
*/

int soldier_value[10][9] = { {0 ,4 ,8 ,12,16,12,8 ,4 ,0 },
							{52,64,108,140,170,140,108,64,52},
							{39,53,70,112,142,112,70,53,39},
							{29,41,54,69,96,69,54,41,29},
							{20,30,38,32,65,48,38,30,20},
							{7 ,0 ,12,0 ,25,0 ,12,0 ,7 },
							{0 ,0 ,-2,0 ,15,0 ,-2,0 ,0 },
							{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
							{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
							{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 }, };
/*
int soldier_black[10][9] = { {0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
							{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
							{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },
							{0 ,0 ,-2,0 ,15,0 ,-2,0 ,0 },
							{6 ,0 ,12,0 ,24,0 ,12,0 ,6 },
							{20,30,38,32,65,48,38,30,20},
							{29,41,54,69,96,69,54,41,29},
							{34,53,70,112,142,112,70,53,34},
							{52,64,108,140,170,140,108,64,52},
							{0 ,4 ,8 ,12,16,12,8 ,4 ,0 }, };
*/
//int evaluate[8] = { 0,40,22,12,12,120,22,8 };
int redx = 4;
int redy = 9;
int blackx = 4;
int blacky = 0;
int mylayer = 0;
int m = 0, n = 0;
int tox = 0, toy = 0;
int type = 0, is_firststep = 0;
int side = RED;
int x = 0;
int y = 0;
vector<string> chess_names = { "  ","车","马","象","士","将","炮","兵" };
int main()
{
	srand(time(0));
	for (int i = 0; i < 10; i++)
	{
		for (int j = 0; j < 9; j++)
		{
			if (board[i][j] == 5)
			{
				redx = j;
				redy = i;
			}
			if (board[i][j] == -5)
			{
				blackx = j;
				blacky = i;
			}
		}
	}
	cout << "初始局面如下：" << endl;
	show();
	while (1)
	{
		side = RED;
		if (isdefeat(side))
			break;
		if (eager_find(2, 0, 10000, 10000, RED) == -10000)break;
		side = BLACK;
		if (isdefeat(side))
			break;
		if (eager_find(2, 0, 10000, 10000, BLACK) == -10000)break;
	}
	system("PAUSE");
}



